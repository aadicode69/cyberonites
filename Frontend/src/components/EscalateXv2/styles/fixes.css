/* Main section containment fixes */
.escxv2 .main-section {
  width: 100vw;
  height: 100vh;
  max-width: 100vw;
  max-height: 100vh;
  overflow: hidden;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
}

/* Villages navigation buttons - ensure they stay above Vanta fog */
.escxv2 .villages-nav-prev,
.escxv2 .villages-nav-next {
  z-index: 150 !important;
  position: relative;
}

.escxv2 .main-section > div {
  width: 100%;
  max-width: 100%;
  height: 100%;
  max-height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 107, 53, 0.5) transparent;
  position: relative;
  z-index: 2;
}

/* Force no sidebar for Sponsors slide */
.escxv2 #section6 > div {
  overflow: hidden !important;
}

/* Fix main swiper slide isolation */
.escxv2 .escalateX-main-swiper .swiper-slide {
  position: relative;
  z-index: 1;
  isolation: isolate;
  background: rgba(10, 10, 15, 0.95) !important;
}

.escxv2 .escalateX-main-swiper .swiper-slide-active {
  z-index: 10 !important;
}

.escxv2 .escalateX-main-swiper .swiper-slide:not(.swiper-slide-active) {
  z-index: 1 !important;
  pointer-events: none;
}

/* Prevent content bleeding between slides */
.escxv2 .escalateX-main-swiper {
  isolation: isolate;
  z-index: 30;
}

/* Custom scrollbar styling */
.escxv2 .main-section > div::-webkit-scrollbar {
  width: 4px;
}

.escxv2 .main-section > div::-webkit-scrollbar-track {
  background: rgba(255, 107, 53, 0.1);
}

.escxv2 .main-section > div::-webkit-scrollbar-thumb {
  background: rgba(255, 107, 53, 0.5);
  border-radius: 2px;
}

.escxv2 .main-section > div::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 107, 53, 0.7);
}

/* Ensure pagination stays within viewport bounds for 95% container */
.escxv2 .swiper:not(.sponsor-swiper):not(.past-sponsors-carousel):not(.villages-swiper) .swiper-pagination {
  position: fixed !important;
  bottom: 50% !important;
  right: 2.5vw !important; /* Adjusted for 95% container */
  left: auto !important;
  transform: translateY(50%) !important;
  width: auto !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 20px !important;
  justify-content: center !important;
  align-items: center !important;
  z-index: 9999 !important;
  pointer-events: auto !important;
  max-width: 25px !important;
}

/* Enhanced sponsorship tier styling - Reduced size */
.escxv2 .sponsorship-tier-card {
  min-height: 300px; /* Reduced from 320px */
  max-width: 260px; /* Limit card width a bit more */
  margin: 0 auto; /* Center cards in grid */
  position: relative;
  background: linear-gradient(135deg, rgba(20, 20, 31, 0.9), rgba(10, 10, 15, 0.95));
  border: 2px solid rgba(255, 107, 53, 0.4);
  clip-path: polygon(0 0, calc(100% - 25px) 0, 100% 25px, 100% 100%, 25px 100%, 0 calc(100% - 25px));
  box-shadow: 
    inset 0 2px 0 rgba(255, 255, 255, 0.1),
    inset 0 -2px 0 rgba(255, 255, 255, 0.05),
    0 15px 40px rgba(0, 0, 0, 0.6),
    0 0 30px rgba(255, 107, 53, 0.2);
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.escxv2 .sponsorship-tier-card:hover {
  border-color: rgba(255, 107, 53, 0.7);
  background: linear-gradient(135deg, rgba(25, 25, 36, 0.95), rgba(15, 15, 20, 0.98));
  box-shadow: 
    inset 0 2px 0 rgba(255, 255, 255, 0.15),
    inset 0 -2px 0 rgba(255, 255, 255, 0.08),
    0 20px 50px rgba(0, 0, 0, 0.8),
    0 0 40px rgba(255, 107, 53, 0.4);
  transform: translateY(-3px) scale(1.02);
}

.escxv2 .sponsorship-tier-card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(45deg, transparent 30%, rgba(255, 107, 53, 0.08) 50%, transparent 70%);
  background-size: 200% 200%;
  animation: tier-holographic 6s ease-in-out infinite;
  z-index: 1;
  pointer-events: none;
}

@keyframes tier-holographic {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

/* Responsive pagination adjustments */
@media (max-width: 768px) {
  .escxv2 .swiper:not(.sponsor-swiper):not(.past-sponsors-carousel):not(.villages-swiper) .swiper-pagination {
    right: 10px !important;
    gap: 15px !important;
    max-width: 20px !important;
  }
}

@media (max-width: 480px) {
  .escxv2 .swiper:not(.sponsor-swiper):not(.past-sponsors-carousel):not(.villages-swiper) .swiper-pagination {
    right: 8px !important;
    gap: 12px !important;
    max-width: 18px !important;
  }
}

/* Fix sponsor carousel containment */
.past-sponsors-carousel {
  width: 100% !important;
  height: auto !important;
  max-width: 100% !important;
  overflow: hidden !important;
  z-index: 5 !important;
}

/* Prevent sponsor swiper from interfering with main pagination */
.sponsors-swiper-button-next,
.sponsors-swiper-button-prev {
  z-index: 10 !important;
}

/* Fix villages swiper isolation */
.escxv2 .villages-swiper {
  z-index: 100 !important; /* Higher than Vanta fog */
  isolation: isolate;
  position: relative !important;
}

/* Ensure villages navigation works */
.escxv2 .villages-nav-prev,
.escxv2 .villages-nav-next {
  pointer-events: auto !important;
  z-index: 200 !important; /* Highest z-index for clickability */
  position: absolute !important;
}

/* Fix villages swiper container positioning */
.escxv2 .villages-swiper .swiper-container {
  position: relative !important;
  z-index: 45 !important;
}

/* Ensure villages swiper wrapper doesn't interfere */
.escxv2 .villages-swiper .swiper-wrapper {
  position: relative !important;
  z-index: 40 !important;
}

/* Fix CTF categories isolation */
.escxv2 #ctf-grid {
  z-index: 5 !important;
  isolation: isolate;
}

.escxv2 #ctf-heading-container {
  z-index: 25 !important;
}

/* Past sponsors carousel enhancements */
.past-sponsors-carousel .escalateX-glass-card {
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    border: 1px solid rgba(249, 115, 22, 0.2);
    box-shadow: 
        0 4px 16px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(249, 115, 22, 0.1);
}

.past-sponsors-carousel .escalateX-glass-card:hover {
    transform: translateY(-4px) scale(1.05);
    border-color: rgba(249, 115, 22, 0.5);
    box-shadow: 
        0 8px 24px rgba(0, 0, 0, 0.6),
        inset 0 1px 0 rgba(249, 115, 22, 0.3),
        0 0 20px rgba(249, 115, 22, 0.2);
}

.past-sponsors-carousel .escalateX-glass-card .tier-badge {
    background: linear-gradient(45deg, rgba(249, 115, 22, 0.2), rgba(249, 115, 22, 0.1));
    border: 1px solid rgba(249, 115, 22, 0.3);
    backdrop-filter: blur(5px);
    transition: all 0.3s;
}

.past-sponsors-carousel .escalateX-glass-card:hover .tier-badge {
    background: linear-gradient(45deg, rgba(249, 115, 22, 0.3), rgba(249, 115, 22, 0.2));
    border-color: rgba(249, 115, 22, 0.5);
    text-shadow: 0 0 8px rgba(249, 115, 22, 0.5);
}
